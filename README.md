üõ†Ô∏è –°–µ—Ä–≤–∏—Å –¥–ª—è —É—á–µ—Ç–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ UCAR-TODOR (FastAPI + PostgreSQL)

–≠—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π API-—Å–µ—Ä–≤–∏—Å, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π User, Car –∏ Incident, —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é.

‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

–§—Ä–µ–π–º–≤–æ—Ä–∫: FastAPI

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL

–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: Poetry

ORM: SQLAlchemy

–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Poetry)

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è Poetry:

poetry install


–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏, –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ:

poetry shell


2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à —Å–µ—Ä–≤–µ—Ä PostgreSQL –∑–∞–ø—É—â–µ–Ω, –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è) —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä .env:

DATABASE_URL="postgresql://postgres:–í–ê–®_–ü–ê–†–û–õ–¨@localhost:5432/postgres"


3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ç–∞–±–ª–∏—Ü (users, cars, incidents) –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

python -m src.main create_tables


4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä Uvicorn:

python -m src.main


–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://0.0.0.0:8000

–ö–ª—é—á–µ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger UI) –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000/docs

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ò–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ (Incidents)

POST /incidents/ ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç.

GET /incidents/ ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ status, skip, limit).

PUT /incidents/{incident_id} ‚Äî –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ –ø–æ ID.

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Users)

POST /users/ ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

GET /users/{user_id} ‚Äî –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø–æ ID.

GET /users/ ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π skip, limit).

PUT /users/{user_id} ‚Äî –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.

DELETE /users/{user_id} ‚Äî –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ú–∞—à–∏–Ω (Cars)

POST /cars/ ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∞—à–∏–Ω—É (—Ç—Ä–µ–±—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π owner_id).

GET /cars/ ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–∞—à–∏–Ω (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ model, year).

GET /cars/{car_id} ‚Äî –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—à–∏–Ω–µ –ø–æ ID.

PUT /cars/{car_id} ‚Äî –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã –ø–æ ID.

DELETE /cars/{car_id} ‚Äî –£–¥–∞–ª–∏—Ç—å –º–∞—à–∏–Ω—É –ø–æ ID.
