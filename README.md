Сервис для учета инцидентов UCAR-TODOR (FastAPI + PostgreSQL)

Это минимальный API-сервис, реализующий CRUD-операции для сущностей User, Car и Incident, согласно предоставленному техническому заданию.

Технологии

Фреймворк: FastAPI

База данных: PostgreSQL

Менеджер зависимостей: Poetry

ORM: SQLAlchemy

Запуск проекта (Использование Poetry)

1. Установка зависимостей

Установите все необходимые пакеты, используя Poetry:

poetry install


Если вы хотите запустить проект в изолированном окружении, активируйте его:

poetry shell


2. Настройка БД

Перед запуском убедитесь, что ваш сервер PostgreSQL запущен, и создайте файл .env (или используйте переменные окружения) с корректной строкой подключения.

Пример .env:

DATABASE_URL="postgresql://postgres:ВАШ_ПАРОЛЬ@localhost:5432/postgres"


3. Создание таблиц

Выполните команду для создания всех необходимых таблиц (users, cars, incidents) в базе данных:

python -m src.main create_tables


4. Запуск сервера

Запустите сервер Uvicorn:

python -m src.main


Сервер будет доступен по адресу: http://0.0.0.0:8000

Ключевые эндпоинты

Интерактивная документация (Swagger UI) доступна по адресу: http://localhost:8000/docs

Эндпоинты для Инцидентов (Incidents)

POST /incidents/ — Создать новый инцидент.

GET /incidents/ — Получить список инцидентов (с фильтром по status, skip, limit).

PUT /incidents/{incident_id} — Обновить статус инцидента по ID.

Эндпоинты для Пользователей (Users)

POST /users/ — Создать нового пользователя.

GET /users/{user_id} — Получить информацию о пользователе по ID.

GET /users/ — Получить список пользователей (с пагинацией skip, limit).

PUT /users/{user_id} — Обновить данные пользователя по ID.

DELETE /users/{user_id} — Удалить пользователя по ID.

Эндпоинты для Машин (Cars)

POST /cars/ — Создать новую машину (требует существующий owner_id).

GET /cars/ — Получить список машин (с фильтрами по model, year).

GET /cars/{car_id} — Получить информацию о машине по ID.

PUT /cars/{car_id} — Обновить данные машины по ID.

DELETE /cars/{car_id} — Удалить машину по ID.
